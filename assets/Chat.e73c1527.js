import{_ as u,o as r,c as o,a as e,t as n,n as c,F as h,r as m,w as d,v as S,p as _,b as f}from"./index.184165dd.js";const I={data(){return{userName:"",userImg:"",actualSender:"",actualDialog:[],writtedLetter:"",IsMyChat:!0,messagesIvanToSelf:[],messagesInanAndI:[],messagesSelf:[]}},created(){this.userImg=localStorage.getItem("userAvatar"),this.userName=localStorage.getItem("userName"),(!this.userName||!this.userImg)&&(alert("\u041E\u0448\u0438\u0431\u043A\u0430! \u0412\u044B \u0435\u0449\u0435 \u043D\u0435 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043B\u0438\u0441\u044C"),this.$router.push("/auth")),localStorage.getItem("messagesIvanToSelf")!==null&&(this.messagesIvanToSelf=JSON.parse(localStorage.getItem("messagesIvanToSelf"))),localStorage.getItem("messagesInanAndI")!==null&&(this.messagesInanAndI=JSON.parse(localStorage.getItem("messagesInanAndI"))),localStorage.getItem("messagesSelf")!==null&&(this.messagesSelf=JSON.parse(localStorage.getItem("messagesSelf"))),this.actualSender=this.userName,this.actualDialog=this.messagesSelf},mounted(){document.querySelector(".messages-block").scrollTo(0,document.body.scrollHeight)},methods:{SignOut(){localStorage.clear(),this.$router.push("/auth")},SendLetter(){this.writtedLetter===""||!this.writtedLetter.trim().length||(this.actualDialog.push({id:new Date().valueOf(),date:new Date().toLocaleString(),text:this.writtedLetter,sender:this.actualSender}),this.actualDialog===this.messagesIvanToSelf?localStorage.setItem("messagesIvanToSelf",JSON.stringify(this.messagesIvanToSelf)):this.actualDialog===this.messagesInanAndI?localStorage.setItem("messagesInanAndI",JSON.stringify(this.messagesInanAndI)):this.actualDialog===this.messagesSelf&&localStorage.setItem("messagesSelf",JSON.stringify(this.messagesSelf)),this.writtedLetter="")},changeUser(){this.actualSender===this.userName?(this.actualSender="Ivan",this.actualDialog===this.messagesSelf&&(this.actualDialog=this.messagesIvanToSelf)):(this.actualSender=this.userName,this.actualDialog===this.messagesIvanToSelf&&(this.actualDialog=this.messagesSelf))},ChangeDialog(l){l==="my"&&this.actualSender===this.userName?(this.actualDialog=this.messagesSelf,this.IsMyChat=!0):l==="my"&&this.actualSender!==this.userName?(this.actualDialog=this.messagesIvanToSelf,this.IsMyChat=!0):l==="friend"&&(this.actualDialog=this.messagesInanAndI,this.IsMyChat=!1)}}},g=l=>(_("data-v-b7095eaa"),l=l(),f(),l),v={class:"container"},p={class:"nav__item-name"},N=["checked"],D=g(()=>e("label",{for:"switch"},"switch",-1)),k=g(()=>e("span",{class:"nav__item-friend"},"\u0418\u0432\u0430\u043D \u0418\u0432\u0430\u043D\u043E\u0432",-1)),y={class:"main-window"},w={class:"list-friends"},C=g(()=>e("div",{class:"list-friends__item"},[e("div",{class:"list-friends__title"},"\u0421\u043F\u0438\u0441\u043E\u043A \u0434\u0440\u0443\u0437\u0435\u0439:")],-1)),b=["src","alt"],L={class:"block-username"},T=["src","alt"],x={class:"block-username"},O={class:"chat"},A={class:"messages-block"},M={class:"message-date"},J={class:"message-text"},U={class:"enter-letter-block"};function B(l,a,j,F,s,i){return r(),o("main",null,[e("div",v,[e("nav",null,[e("span",p,n(s.userName),1),e("input",{type:"checkbox",id:"switch",checked:s.actualSender==="Ivan",onChange:a[0]||(a[0]=(...t)=>i.changeUser&&i.changeUser(...t))},null,40,N),D,k,e("span",{class:"nav__item-out",onClick:a[1]||(a[1]=(...t)=>i.SignOut&&i.SignOut(...t))},"\u0412\u044B\u0445\u043E\u0434")]),e("div",y,[e("div",w,[C,e("div",{class:c(["list-friends__item",{active:!s.IsMyChat}]),onClick:a[2]||(a[2]=t=>i.ChangeDialog("friend"))},[e("img",{class:"block-userimg",src:s.actualSender===s.userName?"/Chat/ivan.jpg":s.userImg.toString(),alt:s.actualSender===s.userName?"Ivan":s.userName},null,8,b),e("div",L,n(s.actualSender===s.userName?"Ivan":s.userName),1)],2),e("div",{class:c(["list-friends__item",{active:s.IsMyChat}]),onClick:a[3]||(a[3]=t=>i.ChangeDialog("my"))},[e("img",{class:"block-userimg",src:s.actualSender===s.userName?s.userImg.toString():"/Chat/ivan.jpg",alt:s.actualSender},null,8,T),e("div",x,n(s.actualSender)+" (Saved Messages)",1)],2)]),e("div",O,[e("div",A,[(r(!0),o(h,null,m(s.actualDialog,t=>(r(),o("div",{class:c(["message",{mself:t.sender===s.actualSender}]),key:t.id},[e("div",M,n(t.date),1),e("div",J,n(t.text),1)],2))),128))]),e("div",U,[d(e("textarea",{class:"enter-letter-block__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435","onUpdate:modelValue":a[4]||(a[4]=t=>s.writtedLetter=t)},null,512),[[S,s.writtedLetter]]),e("div",{class:"enter-letter-block__btn",onClick:a[5]||(a[5]=(...t)=>i.SendLetter&&i.SendLetter(...t))})])])])])])}var q=u(I,[["render",B],["__scopeId","data-v-b7095eaa"]]);export{q as default};
